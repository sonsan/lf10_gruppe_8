<ng-template #viewEmployeeTitle>
  <h2 mat-dialog-title>View Employee</h2>
</ng-template>

<ng-template #editEmployeeTitle>
  <h2 mat-dialog-title>Edit Employee</h2>
</ng-template>

<ng-template #createEmployeeTitle>
  <h2 mat-dialog-title>Create Employee</h2>
</ng-template>

<ng-container *ngIf="employeeExists; else createEmployeeTitle">
  <ng-container *ngIf="employeeReadonly; else editEmployeeTitle">
    <ng-container *ngTemplateOutlet="viewEmployeeTitle"></ng-container>
  </ng-container>
</ng-container>

<mat-dialog-content class="mat-typography employee-form-diaglog">
  <form [formGroup]="employeeForm">
    <div class="form">
      <div class="form-group">
        <mat-form-field>
          <mat-label>First Name</mat-label>
          <input
            matInput
            [(ngModel)]="employee.firstName"
            name="firstName"
            placeholder="Max"
            [readonly]="employeeReadonly"
            formControlName="firstName"
          />
        </mat-form-field>
        <mat-form-field>
          <mat-label>Last Name</mat-label>
          <input
            matInput
            [(ngModel)]="employee.lastName"
            name="lastName"
            placeholder="Muster"
            [readonly]="employeeReadonly"
            formControlName="lastName"
          />
        </mat-form-field>
      </div>

      <mat-form-field>
        <mat-label>Street</mat-label>
        <input
          matInput
          [(ngModel)]="employee.street"
          name="street"
          placeholder="Cool Street 23"
          [readonly]="employeeReadonly"
          formControlName="street"
        />
        <mat-error *ngIf="employeeForm.get('street')!.hasError('required')">
          Street is required
        </mat-error>
      </mat-form-field>

      <div class="form-group">
        <mat-form-field>
          <mat-label>Postcode</mat-label>
          <input
            matInput
            [(ngModel)]="employee.postcode"
            name="postcode"
            placeholder="12345"
            [readonly]="employeeReadonly"
            formControlName="postcode"
          />
          <mat-error *ngIf="employeeForm.get('postcode')!.hasError('required')">
            Postcode is required
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>City</mat-label>
          <input
            matInput
            [(ngModel)]="employee.city"
            name="city"
            placeholder="City"
            formControlName="city"
            [readonly]="employeeReadonly"
          />
          <mat-error *ngIf="employeeForm.get('city')!.hasError('required')">
            City is required
          </mat-error>
        </mat-form-field>
      </div>

      <mat-form-field>
        <mat-label>Phone #</mat-label>
        <input
          matInput
          [(ngModel)]="employee.phone"
          placeholder="+49 1111 02313"
          formControlName="phone"
          [readonly]="employeeReadonly"
        />
      </mat-form-field>
    </div>
  </form>

  <div *ngIf="saving">
    <mat-spinner></mat-spinner>
    <mat-label>Saving Changes</mat-label>
  </div>
</mat-dialog-content>
<mat-dialog-actions>
  <button mat-button (click)="dialogRef.close()">Cancel</button>
  <button
    mat-button
    *ngIf="!employeeReadonly"
    [disabled]="!employeeForm.valid"
    (click)="save()"
  >
    Save
  </button>
</mat-dialog-actions>
